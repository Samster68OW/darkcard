<html>
    <head>
        <title>DARK CARD</title>
        <meta charset='UTF-8'>
        <meta name='viewport' content='width=device-width, initial-scale=1.0'>
        <!--Icons-->
        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
        <!--External-->
            <link rel="preconnect" href="https://fonts.googleapis.com">
            <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
            <script src='http://code.jquery.com/jquery-latest.min.js' type='text/javascript'></script>
            <link href="https://fonts.googleapis.com/css2?family=Edu+NSW+ACT+Foundation&display=swap" rel="stylesheet">
            <link href="https://fonts.googleapis.com/css2?family=Righteous&display=swap" rel="stylesheet">
        <!--Internal-->
            <!--data-->
                <script src='data/cards.js' type='text/javascript'></script>
                <script src='data/levels.js' type='text/javascript'></script>
            <!--documents-->
                <script src='documents/dialogue.js' type='text/javascript'></script>
                <script src='documents/gj-js-api.js' type='text/javascript'></script>
                <script src='documents/gameplay.js' type='text/javascript'></script>
                <script src='documents/player-data.js' type='text/javascript'></script>
            <link href='animations.css' rel='stylesheet'>
            <script src='dev-log.js' type='text/javascript'></script>
            <link href='stylesheet.css' rel='stylesheet'>
    </head>
    <body>
    <center>
        <div id='area1' class='mainArea' hidden><br> <!--Main Menu-->
            <div id="mainTitle">DARK CARD</div>
            <div class="mainMenuList">
                <div onclick="loadSpace(6);">Play Game</div><br>
                <div onclick="loadSpace(7);">Statistics</div><br>
                <div onclick="loadSpace(5);">Card Gallery</div>
            </div>
        </div>
        <div id='area2' class='mainArea' onclick="skipDialogue();" hidden><br> <!--The Game-->
            <div id="dialogueLocation"></div>
            <div id="cardTableSpot"></div>
            <div id="cardsLeftSpot"></div>
            <!--Features-->
                <table id="heartTable"><tr>
                    <td id="heart3"></td>
                    <td id="heart2"></td>
                    <td id="heart1"></td>
                </tr></table>
                <table id="sanityTable"></table>
                <div id="sanityWord">Sanity</div>
            <!--Features Animations-->
                <div id="enemyKnife"></div>
                <div id="leftEye"></div>
                <div id="rightEye"></div>
        </div>
        <div id='area3' class='mainArea' hidden><br> <!--Game Over-->
            <div id="gameoverTitle">Game Over!</div>
        </div>
        <div id='area4' class='mainArea' hidden><br> <!--Level Select-->
            <div id="mainTitle">Select Level</div>
            <div id="playlistNameSpot"></div>
            <div id="levelSelectSpot"></div>
            <div class="mainMenuList">
                <div onclick="loadSpace(6);">Back</div>
            </div>
        </div>
        <div id='area5' class='mainArea' hidden><br> <!--Card Gallery-->
            <div id="mainTitle">Card Gallery</div>
            <div id="cardGallerySpot"></div>
            <div class="mainMenuList">
                <div onclick="loadSpace(1);">Back</div>
            </div>
        </div>
        <div id='area6' class='mainArea' hidden><br> <!--Playlist Select-->
            <div id="mainTitle">Select Playlist</div>
            <div id="playlistSelectSpot"></div>
            <div class="mainMenuList">
                <div onclick="loadSpace(1);">Back</div>
            </div>
        </div>
        <div id='area7' class='mainArea' hidden><br> <!--Statistics-->
            <div id="mainTitle">Statistics</div>
            <div id="usernameSpot"></div>
            <div id="informationSpot"></div>
            <div class="mainMenuList">
                <div onclick="loadSpace(1);">Back</div>
            </div>
        </div>



        <span id="fontLoader" style="color:black;">
            <span style="font-family: 'Edu NSW ACT Foundation', cursive;">1</span>
            <span style="font-family: 'Righteous', cursive;">2</span>
        </span>
    </center>
        <script type='text/javascript'>



$(document).ready(function(){
    buildPlaylists();
    for (var i=0; i<playlist.length; i++) {
        farthestLevel.push(1);
    }
    farthestLevel = [10, 1]; // TODO
    loadData();
    setTimeout(function(){
        $('#fontLoader').fadeOut(0);
        loadSpace(1);
    },500);
});
function loadSpace(num) {
    // Check Level
        if (currentLevel > farthestLevel) {
            farthestLevel = currentLevel;
        }
    // Specifics
        switch (num) {
            case 4: generateLevelSelectScreen(); break;
            case 5: generateCardGalleryScreen(); break;
            case 6: generatePlaylistScreen(); break;
            case 7:
                // Calculate Total Levels
                    var levelsTotal = 0;
                    for (var a=0; a<playlist.length; a++) {
                        for (var b=0; b<playlist[a].length; b++) {
                            levelsTotal++;
                        }
                        levelsTotal--;
                    }
                // Calculate Levels Beaten
                    var levelsBeaten = 0;
                    for (var a=0; a<farthestLevel.length; a++) {
                        levelsBeaten += farthestLevel[a];
                        levelsBeaten--;
                    }
                $('#informationSpot').html(`Levels Beaten: <span style='color:yellow'>${levelsBeaten} / ${levelsTotal}</span>`);
                $('#usernameSpot').html(username);
                break;
        }
    // General
        $('.mainArea').fadeOut(0);
        $('#area' + num).fadeIn(0);
};



function generateLevelSelectScreen() {
    var display = `<table id='levelSelectTable'>`;
    for (var a=1; a<farthestLevel[currentPlaylist]+1; a++) {
        if (a >= playlist[currentPlaylist].length) {break;}
        display += `<tr><td onclick='playGame(${a});'>${a} - ${playlist[currentPlaylist][a].name}</td></tr>`;
    }
    display += `</table>`;
    $('#levelSelectSpot').html(display);
    $('#playlistNameSpot').html(`"${playlist[currentPlaylist][0].name}" by ${playlist[currentPlaylist][0].author}`);
    if (farthestLevel[currentPlaylist] === playlist[currentPlaylist].length) {
        $('#playlistNameSpot').css('color','yellow');
    }
    else {
        $('#playlistNameSpot').css('color','white');
    }
};
function generateCardGalleryScreen() {
    var display = `<table id='cardGalleryTable'>`;
    for (var a=0; a<card.length; a++) {
        display += `<tr><td><img src='images/card/${card[a].name.toLowerCase()}.png' alt='${card[a].name}'> ${card[a].name}: ${card[a].desc}</td></tr>`;
    }
    display += `</table>`;
    $('#cardGallerySpot').html(display);
};
function generatePlaylistScreen() {
    var display = `<table id='levelSelectTable'>`;
    for (var a=0; a<playlist.length; a++) {
        var coloring = '';
        if (farthestLevel[a] === playlist[a].length) {
            coloring = 'style="color:yellow;"';
        }
        display += `<tr><td ${coloring} onclick='currentPlaylist=${a}; loadSpace(4);'>"${playlist[a][0].name}" by ${playlist[a][0].author} (${playlist[a].length-1} Levels)</td></tr>`;
    }
    display += `</table>`;
    $('#playlistSelectSpot').html(display);
};


        </script>
    </body>
</html>